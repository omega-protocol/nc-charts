{{- define "crd_extension-dashboard" -}}
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: extensions.dashboard.tekton.dev
  labels: {{- include "helpers.labels.labels" (dict "Global" $) | nindent 4 }}
  annotations:
    "helm.sh/hook": "crd-install"
spec:
  additionalPrinterColumns:
  - JSONPath: .spec.apiVersion
    name: API version
    type: string
  - JSONPath: .spec.name
    name: Kind
    type: string
  - JSONPath: .spec.displayname
    name: Display name
    type: string
  - JSONPath: .metadata.creationTimestamp
    name: Age
    type: date
  group: dashboard.tekton.dev
  names:
    categories:
    - tekton
    - tekton-dashboard
    kind: Extension
    plural: extensions
    shortNames:
    - ext
    - exts
  preserveUnknownFields: false
  scope: Namespaced
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      type: object
      x-kubernetes-preserve-unknown-fields: true
  versions:
  - name: v1alpha1
    served: true
    storage: true
...
{{- end -}}
{{- include "helpers.template.overlay" ( dict "Global" $ "template_definition" "crd_extension-dashboard" ) }}
